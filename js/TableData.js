(function(b){var a={};b.fn.TableData=function(d){if(typeof d=="string"){return b.fn.TableData.methods[d](this)}var e={url:"",rows:10,page:1,IsOne:true,model:"",pagination:false,NoData:"没有查到数据!",queryParams:function(){return{}},thisID:"",onLoadSuccess:function(f){},onBeforeLoad:function(f){}};var c=b.extend(e,d);c.thisID=b(this).attr("id");a[b(this).attr("id")]=c;if(c.pagination){b(this).parent().after(' <div id="'+c.thisID+'page" style=" text-align: center; margin: 10px auto; width: 500px;"></div>')}b(this).TableData("Load")};b.fn.TableData.methods={Query:function(e){var c=a[b(e).attr("id")];var d=c.queryParams();d.page=c.page;d.rows=c.rows;Post(c.url,d,function(f){c.onBeforeLoad(f);try{if(f["total"]==undefined){laytpl(b("#"+c.model).html()).render(f,function(h){b(e).html(h)});return}if(f.total==0){b(e).html(c.NoData)}else{laytpl(b("#"+c.model).html()).render(f,function(h){b(e).html(h)})}if(c.pagination){laypage({cont:c.thisID+"page",pages:Math.ceil(f.total/c.rows),curr:c.page,jump:function(h,i){if(!i){c.page=h.curr;b(e).TableData("Load",c.queryParams())}}})}}catch(g){b(e).html(c.NoData)}c.onLoadSuccess(f)})},Load:function(d){var c=a[b(d).attr("id")];if(IsFirefox&&c.IsOn){setTimeout(function(){b(d).TableData("Query");c.IsOne=false},500);return}b(d).TableData("Query")},ReLoad:function(d){var c=a[b(d).attr("id")];c.page=1;b(d).TableData("Query")}}})(jQuery);